---           
layout: post
title: Python 3.3 and Bluetooth native socket
date: 2013-07-09 05:11:43 UTC
updated: 2013-07-09 05:11:43 UTC
comments: false
categories: 
---

I have posted <a href="http://nextslides.blogspot.com/2013/07/python-26-and-pybluez.html">earlier</a> on how to run a simple serial server using Python 2.6 and PyBluez. Python 3.3 has natively available sockets class written for Bluetooth communication, eliminating the needs for PyBluez. I have not tested it yet myself, but if I'm not mistaken the native Bluetooth socket is only supported on unix based OS. So, if you're on Windows, my guess is best to stay with Python 2.6 and PyBluez.<br /><br />A sample script for the server is as below:<br /><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">"""<br />A simple Python script to receive messages from a client over<br />Bluetooth using Python sockets (with Python 3.3 or above).<br />"""<br /><br />import socket<br /><br />hostMACAddress = '00:1f:e1:dd:08:3d'&nbsp;</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#The MAC address of a Bluetooth adapter on the server.&nbsp;</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#The server might have multiple Bluetooth adapters.</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br />port = 3&nbsp;</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">#3 is an arbitrary choice. It should match the port used by the client.<br />backlog = 1<br />size = 1024&nbsp;</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br />s = socket.socket(socket.AF_BLUETOOTH, socket.SOCK_STREAM, socket.BTPROTO_RFCOMM)<br />s.bind((hostMACAddress,port))<br />s.listen(backlog)</span></span><br /><span style="font-size: small;"><span style="font-family: &quot;Courier New&quot;,Courier,monospace;"><br />try:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client, address = s.accept()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while 1:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data = client.recv(size)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if data:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print(data)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.send(data)<br />except:&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; print("Closing socket")&nbsp;&nbsp; <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; client.close()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; s.close()</span></span><br /><br />The scripts was not written by me. The original page <a href="http://kevindoran1.blogspot.co.nz/2013/04/bluetooth-programming-with-python-3.html">here</a> discussed the difference between Python 2.6+PyBluez and native Bluetooth socket in Python 3.3.<br /><br /><a href="http://bitsofpy.blogspot.com.ar/2012/09/bluetooth-with-python-33.html">Here's</a> an example of how to use the native Bluetooth socket to send a few command bytes to control the speed and direction of a Bluetooth controlled car.