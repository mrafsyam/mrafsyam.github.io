---           
layout: post
title: Shared Preferences on Android
date: 2014-09-05 11:21:48 UTC
updated: 2014-09-05 11:21:48 UTC
comments: false
categories: 
---

<b><span style="font-family: inherit; font-size: large;">Listing out some useful Shared Preferences snippets for easy references&nbsp;</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">public static final String MyPREFERENCES = "MyPrefs" ; //name to save Shared Preferences xml file</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">String currentmode = ""; //default current mode to start App</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">//find the App's Shared Preferences. If it doesn't exist, create one. Name it "setting"</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">SharedPreferences setting = getSharedPreferences(MyPREFERENCES, Context.MODE_PRIVATE);</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">//debug : used to &nbsp;shared preferences</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">/* Editor editor = setting.edit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">editor.clear();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">editor.commit(); */</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">//check the last saved mode of operation. load it if it existed</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">public void checkMode(){</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; if (setting.contains("savedmode")){</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; currentmode = (setting.getString("savedmode",""));</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp;Toast.makeText(getApplicationContext(),"Loading last saved mode of operation", Toast.LENGTH_SHORT).show();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; } else {</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; //no setting saved for mode. Save convenient mode by default</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; currentmode = "convenient";</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp;Editor editor = setting.edit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp;editor.putString("savedmode", currentmode);</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp;editor.commit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp;Toast.makeText(getApplicationContext(),"No mode found in the setting", Toast.LENGTH_SHORT).show();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; }</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">}</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">//debug : to show all data stored in Shared Preferences</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">/*Map&lt;string&gt; keys = setting.getAll();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">for(Map.Entry&lt;string&gt; entry : keys.entrySet()){</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; Log.d("map values",entry.getKey() + ": " + entry.getValue().toString()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">}*/</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">//mode toggling method for ToggleButton. Save the adjusted current mode to Shared Preferences</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">public void ToggleMode(View view){</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; ToggleButton toggle = (ToggleButton) findViewById(R.id.toggleMode);</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; boolean on = toggle.isChecked();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp;</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; if (on){</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; currentmode = "convenient";</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; Editor editor = setting.edit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; editor.putString("savedmode", currentmode);</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; editor.commit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; Toast.makeText(getApplicationContext(),"Mode changed to Convenient", Toast.LENGTH_SHORT).show();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; } else {</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; currentmode = "secured";</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; Editor editor = setting.edit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; editor.putString("savedmode", currentmode);</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; editor.commit();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; &nbsp; Toast.makeText(getApplicationContext(),"Mode changed to Secured", Toast.LENGTH_SHORT).show();</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;"><br /></span></b><b><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; }</span></b><br /><b><span style="font-family: Courier New, Courier, monospace;">};</span></b><br /><br />