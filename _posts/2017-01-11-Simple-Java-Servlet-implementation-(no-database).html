---           
layout: post
title: Simple Java Servlet implementation (no database)
date: 2017-01-11 05:37:40 UTC
updated: 2017-01-11 05:37:40 UTC
comments: false
categories: 
---

<b><span style="font-size: large;">1. Creating your project directory in Tomcat's webapps folder.</span></b><br /><br />In Debian Server, Tomcat can be installed at a few possible location such as<br /><br /><ul><li><span style="font-family: Courier New, Courier, monospace;">/usr/share/tomcat8</span></li><li><span style="font-family: Courier New, Courier, monospace;">/var/lib/tomcat8/</span> (Note : this is where Tomcat is installed in KWT server)</li><li><span style="font-family: Courier New, Courier, monospace;">/opt/tomcat8</span></li></ul><div>However, our web application are to be placed inside the "webapps" folder. For example, for KWT server, your web application should be placed in :<br /><ul><li><span style="font-family: Courier New, Courier, monospace;">/var/lib/tomcat8/webapps/</span></li></ul><div>First, <b>use ssh client to access your server</b>. Then, go to this directory : <span style="font-family: Courier New, Courier, monospace;">cd /var/lib/tomcat8/webapps/</span></div></div><div><br /></div><div>Create a directory with your project name : <span style="font-family: Courier New, Courier, monospace;">mkdir projectRaf</span></div><div><br /></div><div>Create a simple index.html page to test our project page : <span style="font-family: Courier New, Courier, monospace;">touch index.html&nbsp;</span></div><div><br /></div><div>Insert something (anything) to that file : <span style="font-family: Courier New, Courier, monospace;">echo "this is my project page" &gt; index.html</span></div><div><br /></div><div>Go to your project page. For KWT, this will be <b>http://{your-server-IP-here}:8080/projectRaf&nbsp;</b>and the content of the index.html should be displayed. Note that 8080 is the port used by Tomcat. For comparison, Apache2 web server uses port 80, which is the default port for all browser (you don't have to specify the port for Apache2 web server). For Tomcat, you need to specify the port 8080.</div><div><br /></div><div><span style="font-size: large;"><br /></span></div><div><span style="font-size: large;"><b>2. Revise on the Java Servlet's operation.</b></span><br /><br />If you haven't, you should go through this note again :&nbsp;<a href="http://nextslides.blogspot.my/2017/01/beginning-to-web-app-developement-web.html">http://nextslides.blogspot.my/2017/01/beginning-to-web-app-developement-web.html</a><br /><br />Make sure you understand the use of <b>HTTP POST</b> and <b>HTTP GET</b> as well as <b>Servlet Mapping</b>.</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-aRZwfWk15AU/WHWjo9XeTYI/AAAAAAAABsc/WFCZs8eizxIOTSSMxSq2CmrgxjyZ_kmvQCLcB/s1600/Captureform.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="397" src="https://4.bp.blogspot.com/-aRZwfWk15AU/WHWjo9XeTYI/AAAAAAAABsc/WFCZs8eizxIOTSSMxSq2CmrgxjyZ_kmvQCLcB/s400/Captureform.PNG" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both;">Handling form data represented in HTML page is a very common task in web development. A typical scenario is the user fills in fields of a form and submits it.&nbsp;</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">The server will process the request based on the submitted data, and send response back to the client - this is what our Java Servlet does.&nbsp;</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;"><span style="font-size: large;"><b><br /></b></span></div><div class="separator" style="clear: both;"><span style="font-size: large;"><b>3. Create simple form (Front end)</b></span></div><div class="separator" style="clear: both;"><br /></div>Since our index.html file is in the server, it is quite&nbsp;<b><i>inconvinience to edit the file directly</i></b>&nbsp;on the server.<br /><br />Luckily, <b>Bitvise SSH Client</b> comes with <b>SFTP Window browser</b>. This allow us to graphically transfer file from our local to our server, specifically to Tomcat's webapps folder<br /><div class="separator" style="clear: both; text-align: center;"><span style="text-align: start;"><br /></span></div><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-zC6ncL0rJw8/WHWpYlRkogI/AAAAAAAABs4/M6K_GkfgkVgGLCy_5soU9PIU5psBpMDvQCEw/s1600/Capturesftpwindow.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="348" src="https://1.bp.blogspot.com/-zC6ncL0rJw8/WHWpYlRkogI/AAAAAAAABs4/M6K_GkfgkVgGLCy_5soU9PIU5psBpMDvQCEw/s400/Capturesftpwindow.PNG" width="400" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/--RnMp60fnUQ/WHWpYVDCUaI/AAAAAAAABs0/LU1S2lxxYz0KNhQW_VtPJfjxYMXVToCugCEw/s1600/bitvise.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="196" src="https://4.bp.blogspot.com/--RnMp60fnUQ/WHWpYVDCUaI/AAAAAAAABs0/LU1S2lxxYz0KNhQW_VtPJfjxYMXVToCugCEw/s640/bitvise.PNG" width="640" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="" style="clear: both;">Edit our <b>index.html</b> and put in the following :<br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-wZJe0V_VXIk/WHWkeWR_FmI/AAAAAAAABsk/7-RPmRqBzRAOilr5FWgvRo9pJVbV_SwXQCLcB/s1600/Captureformhtml.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="161" src="https://3.bp.blogspot.com/-wZJe0V_VXIk/WHWkeWR_FmI/AAAAAAAABsk/7-RPmRqBzRAOilr5FWgvRo9pJVbV_SwXQCLcB/s640/Captureformhtml.PNG" width="640" /></a></div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">Form attributes :</div><div class="separator" style="clear: both;"></div><ul><li><b><span style="font-family: Courier New, Courier, monospace;">method=”post”</span></b> : to send the form data as an HTTP POST request to the server. <br />Remember the difference between <b>HTTP POST</b> and<b> HTTP GET</b>?<br /></li><li><span style="font-family: Courier New, Courier, monospace;"><b>action=”servlet--URL”</b></span> : specifies the URL of the servlet. <br />Remember what is <b>Servlet-mapping</b>? This is the usage of that mapping.</li></ul><br /><div>Once done, copy and overwrite the index.html on the server. Then go to the project URL, you should see something like below :<br /><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-xfKOHx5l1SA/WHWrotqYaGI/AAAAAAAABtA/3WhVAG-VPrk6gM0ALD3i7ooutR0cUYwyACLcB/s1600/Captureformmm.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="221" src="https://3.bp.blogspot.com/-xfKOHx5l1SA/WHWrotqYaGI/AAAAAAAABtA/3WhVAG-VPrk6gM0ALD3i7ooutR0cUYwyACLcB/s400/Captureformmm.PNG" width="400" /></a></div><div class="separator" style="clear: both; text-align: left;">Note that this is a simple form. We will use this similar index.html file in our Eclipse project below.</div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b><span style="font-size: large;">4. Create Servlet using Eclipse (Back End)</span></b></div><div class="separator" style="clear: both; text-align: left;"><b><span style="font-size: large;"><br /></span></b></div><div class="separator" style="clear: both; text-align: left;">For simplicity, we use the following tutorial : <a href="http://www.studytonight.com/servlet/creating-servlet-in-eclipse.php">http://www.studytonight.com/servlet/creating-servlet-in-eclipse.php</a></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;"><b><br /></b></span></div><div class="separator" style="clear: both; text-align: left;"><span style="font-size: large;"><b>5. Change the Servlet code</b></span></div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">On the server side, we need to create a Java servlet which want to be mapped to loginServlet, as specified in the form’s action attribute (see our index.html above). Following is code snippet of the servlet, using the annotation method, specifically on the <span style="font-family: Courier New, Courier, monospace;"><b>doPost( )</b></span> method</div><div class="separator" style="clear: both;"><br /><b>You may want to change the package name to yours.</b><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-6K-LDBvQHiY/WHWvy6qSXuI/AAAAAAAABtQ/kiHsuJbaY2skdC3CZOxjZfOiBwnmuKSKQCLcB/s1600/servlet.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="556" src="https://2.bp.blogspot.com/-6K-LDBvQHiY/WHWvy6qSXuI/AAAAAAAABtQ/kiHsuJbaY2skdC3CZOxjZfOiBwnmuKSKQCLcB/s640/servlet.PNG" width="640" /></a></div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;"><br /><span style="font-size: large;"><b>6. Understand the Servlet&nbsp;</b></span><br /></div><div class="separator" style="clear: both;">Notice that the servlet’s URL is specified by the @WebServlet annotation before the servlet class.&nbsp;</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">When the user submits the login form above, the servlet’s doPost() method will be invoked by the servlet container.&nbsp;</div><div class="separator" style="clear: both;"><br /></div><div class="separator" style="clear: both;">Typically we will do the following tasks inside <span style="font-family: Courier New, Courier, monospace;"><b>doPost()</b></span> method:</div><div class="separator" style="clear: both;"></div><ul><li>Read values of the fields posted from the form via the request object (implementation of javax.servlet.http.HttpServletRequest interface).<br /></li><li>Do some processing, e.g. connecting to database to validate the username and password.<br /></li><li>Return response back to the user via the respone object (implementation of javax.servlet.http.HttpServletResponse interface).</li></ul><br /><div class="separator" style="clear: both;"></div><div><div><br /></div><div>To read values of form’s fields, the HttpServletRequest interface provides the following methods:</div><div><ul><li><span style="font-family: Courier New, Courier, monospace;"><b>String getParameter(String name) </b></span>: gets value of a field which is specified by the given name, as a String. The method returns null if there is no form field exists with the given name.</li><li><span style="font-family: Courier New, Courier, monospace;"><b>String[] getParameterValues(String name)</b></span> : gets values of a group of fields which have same name, in an array of String objects. The method returns null if there is no field exists with the given name.</li></ul></div><div>Usage :</div><div><span style="font-family: Courier New, Courier, monospace;"><b>String username = request.getParameter("username");</b></span></div><div><span style="font-family: Courier New, Courier, monospace;"><b>String password = request.getParameter("password");</b></span></div></div><div><br /></div><div><div>To send response back to the client, we need to obtain a writer from the response object by calling the method <span style="font-family: Courier New, Courier, monospace;"><b>getWriter()</b></span> of the HttpServletResponse interface:</div><div><br /></div><div><span style="font-family: Courier New, Courier, monospace;"><b>PrintWriter writer = response.getWriter();</b></span></div><div><br /></div><div>Then use the <span style="font-family: Courier New, Courier, monospace; font-weight: bold;">print()&nbsp;</span>or<span style="font-family: Courier New, Courier, monospace; font-weight: bold;">&nbsp;println()</span> method to deliver the response (in form of HTML code).&nbsp;</div><div><br /></div><div>For example :</div><div><br /></div><div><span style="font-family: Courier New, Courier, monospace;"><b>String htmlRespone = "{create-html-out-here}";</b></span></div><div><span style="font-family: Courier New, Courier, monospace;"><b>writer.println(htmlRespone);</b></span></div></div><div><span style="font-family: Courier New, Courier, monospace;"><b><br /></b></span></div><div><span style="font-family: Courier New, Courier, monospace;"><b><br /></b></span></div><div><b style="font-size: x-large;">6. Include index.html&nbsp;</b></div><div><b style="font-size: x-large;"><br /></b></div><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-nNpK9LCtwhI/WHW5LsR-e3I/AAAAAAAABtg/ayXDel5iUuALD5v3_Dq9SUgFSsXINKd2ACLcB/s1600/webcontent.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320" src="https://1.bp.blogspot.com/-nNpK9LCtwhI/WHW5LsR-e3I/AAAAAAAABtg/ayXDel5iUuALD5v3_Dq9SUgFSsXINKd2ACLcB/s320/webcontent.PNG" width="312" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">According to this strucure, we can include our index.html direcly on our project's <b>WebContent</b> root on Eclipse. You can either copy the index.html and drag onto WebContent folder on Eclipse or create a new index.html file and just copy paste the content we have written previously.<br /><br /><b><span style="font-size: large;"><br /></span></b></div><div class="separator" style="clear: both; text-align: left;"><b><span style="font-size: large;">7. Create a war file of our project and export to server&nbsp;</span></b></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both;">On Eclipse, right-click on the <b>project name &gt; Export &gt; WAR file</b></div><div><b style="font-size: x-large;"><br /></b></div><div>Use the <b>Bitvise SSH client SFTP window</b> tool to transfer our war file to server Tomcat's webapps folder.<br /><br />Note that when the war file are complely transferred to Tomcat's webapps folder, it will be <i><b><span style="font-size: large;">automatically</span></b></i> uncompressed into our project folder.<br /><br />Access our project URL to see our deployed web application (index.html + simple Servlet).<br /><br /><br /></div>